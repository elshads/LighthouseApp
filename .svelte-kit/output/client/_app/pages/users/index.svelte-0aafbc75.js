import{S as V,i as z,s as Q,ay as W,aB as X,F as Y,G as Z,k as L,w as d,e as x,ai as ee,d as c,m as R,x as g,c as te,a as se,b as ae,g as i,y as b,I as re,q as m,o as p,B as w,J as M,v as ne,K as j,az as oe,aE as le,l as A,n as fe,p as ue,aA as F,aF as $e,aG as ce,t as C,h as I,aI as O,aJ as J,ar as B,aK as ie,aH as me,aL as pe,j as K,as as U,av as _e,aM as q}from"../../chunks/vendor-cf8775f0.js";import{l as N}from"../../chunks/appStore-28a71663.js";import{c as de}from"../../chunks/csvGenerator-27de1fc1.js";import{s as ge}from"../../chunks/stores-847348a8.js";function be(n){let e;return{c(){e=C("Home")},l(a){e=I(a,"Home")},m(a,t){i(a,e,t)},d(a){a&&c(e)}}}function we(n){let e;return{c(){e=C("Users")},l(a){e=I(a,"Users")},m(a,t){i(a,e,t)},d(a){a&&c(e)}}}function he(n){let e,a,t,o;return e=new F({props:{href:"/",$$slots:{default:[be]},$$scope:{ctx:n}}}),t=new F({props:{href:"/users",isCurrentPage:!0,$$slots:{default:[we]},$$scope:{ctx:n}}}),{c(){d(e.$$.fragment),a=L(),d(t.$$.fragment)},l(s){g(e.$$.fragment,s),a=R(s),g(t.$$.fragment,s)},m(s,r){b(e,s,r),i(s,a,r),b(t,s,r),o=!0},p(s,r){const u={};r&32768&&(u.$$scope={dirty:r,ctx:s}),e.$set(u);const l={};r&32768&&(l.$$scope={dirty:r,ctx:s}),t.$set(l)},i(s){o||(m(e.$$.fragment,s),m(t.$$.fragment,s),o=!0)},o(s){p(e.$$.fragment,s),p(t.$$.fragment,s),o=!1},d(s){w(e,s),s&&c(a),w(t,s)}}}function ke(n){let e,a;return e=new oe({props:{noTrailingSlash:!0,$$slots:{default:[he]},$$scope:{ctx:n}}}),{c(){d(e.$$.fragment)},l(t){g(e.$$.fragment,t)},m(t,o){b(e,t,o),a=!0},p(t,o){const s={};o&32768&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){a||(m(e.$$.fragment,t),a=!0)},o(t){p(e.$$.fragment,t),a=!1},d(t){w(e,t)}}}function ve(n){let e;return{c(){e=C("Export selected")},l(a){e=I(a,"Export selected")},m(a,t){i(a,e,t)},d(a){a&&c(e)}}}function Ce(n){let e;return{c(){e=C("Delete")},l(a){e=I(a,"Delete")},m(a,t){i(a,e,t)},d(a){a&&c(e)}}}function Ie(n){let e,a,t,o;return e=new O({props:{icon:J,$$slots:{default:[ve]},$$scope:{ctx:n}}}),e.$on("click",function(){B(n[8](n[4],"selected"))&&n[8](n[4],"selected").apply(this,arguments)}),t=new O({props:{icon:ie,$$slots:{default:[Ce]},$$scope:{ctx:n}}}),{c(){d(e.$$.fragment),a=L(),d(t.$$.fragment)},l(s){g(e.$$.fragment,s),a=R(s),g(t.$$.fragment,s)},m(s,r){b(e,s,r),i(s,a,r),b(t,s,r),o=!0},p(s,r){n=s;const u={};r&32768&&(u.$$scope={dirty:r,ctx:n}),e.$set(u);const l={};r&32768&&(l.$$scope={dirty:r,ctx:n}),t.$set(l)},i(s){o||(m(e.$$.fragment,s),m(t.$$.fragment,s),o=!0)},o(s){p(e.$$.fragment,s),p(t.$$.fragment,s),o=!1},d(s){w(e,s),s&&c(a),w(t,s)}}}function Te(n){let e;return{c(){e=C(".csv - All rows")},l(a){e=I(a,".csv - All rows")},m(a,t){i(a,e,t)},d(a){a&&c(e)}}}function Le(n){let e;return{c(){e=C(".csv - Filtered rows")},l(a){e=I(a,".csv - Filtered rows")},m(a,t){i(a,e,t)},d(a){a&&c(e)}}}function Re(n){let e,a,t,o;return e=new q({props:{$$slots:{default:[Te]},$$scope:{ctx:n}}}),e.$on("click",function(){B(n[8](n[1],"all"))&&n[8](n[1],"all").apply(this,arguments)}),t=new q({props:{$$slots:{default:[Le]},$$scope:{ctx:n}}}),t.$on("click",function(){B(n[8](n[3],"filtered"))&&n[8](n[3],"filtered").apply(this,arguments)}),{c(){d(e.$$.fragment),a=L(),d(t.$$.fragment)},l(s){g(e.$$.fragment,s),a=R(s),g(t.$$.fragment,s)},m(s,r){b(e,s,r),i(s,a,r),b(t,s,r),o=!0},p(s,r){n=s;const u={};r&32768&&(u.$$scope={dirty:r,ctx:n}),e.$set(u);const l={};r&32768&&(l.$$scope={dirty:r,ctx:n}),t.$set(l)},i(s){o||(m(e.$$.fragment,s),m(t.$$.fragment,s),o=!0)},o(s){p(e.$$.fragment,s),p(t.$$.fragment,s),o=!1},d(s){w(e,s),s&&c(a),w(t,s)}}}function Se(n){let e,a,t,o;return e=new me({props:{value:n[2]}}),e.$on("input",n[6]),e.$on("clear",n[7]),t=new pe({props:{icon:J,$$slots:{default:[Re]},$$scope:{ctx:n}}}),{c(){d(e.$$.fragment),a=L(),d(t.$$.fragment)},l(s){g(e.$$.fragment,s),a=R(s),g(t.$$.fragment,s)},m(s,r){b(e,s,r),i(s,a,r),b(t,s,r),o=!0},p(s,r){const u={};r&4&&(u.value=s[2]),e.$set(u);const l={};r&32778&&(l.$$scope={dirty:r,ctx:s}),t.$set(l)},i(s){o||(m(e.$$.fragment,s),m(t.$$.fragment,s),o=!0)},o(s){p(e.$$.fragment,s),p(t.$$.fragment,s),o=!1},d(s){w(e,s),s&&c(a),w(t,s)}}}function Ee(n){let e,a,t,o;return e=new $e({props:{$$slots:{default:[Ie]},$$scope:{ctx:n}}}),t=new ce({props:{$$slots:{default:[Se]},$$scope:{ctx:n}}}),{c(){d(e.$$.fragment),a=L(),d(t.$$.fragment)},l(s){g(e.$$.fragment,s),a=R(s),g(t.$$.fragment,s)},m(s,r){b(e,s,r),i(s,a,r),b(t,s,r),o=!0},p(s,r){const u={};r&32784&&(u.$$scope={dirty:r,ctx:s}),e.$set(u);const l={};r&32782&&(l.$$scope={dirty:r,ctx:s}),t.$set(l)},i(s){o||(m(e.$$.fragment,s),m(t.$$.fragment,s),o=!0)},o(s){p(e.$$.fragment,s),p(t.$$.fragment,s),o=!1},d(s){w(e,s),s&&c(a),w(t,s)}}}function Ne(n){let e,a;return e=new le({props:{$$slots:{default:[Ee]},$$scope:{ctx:n}}}),{c(){d(e.$$.fragment)},l(t){g(e.$$.fragment,t)},m(t,o){b(e,t,o),a=!0},p(t,o){const s={};o&32798&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){a||(m(e.$$.fragment,t),a=!0)},o(t){p(e.$$.fragment,t),a=!1},d(t){w(e,t)}}}function je(n){let e=n[14].value+"",a;return{c(){a=C(e)},l(t){a=I(t,e)},m(t,o){i(t,a,o)},p(t,o){o&16384&&e!==(e=t[14].value+"")&&K(a,e)},i:U,o:U,d(t){t&&c(a)}}}function Be(n){let e,a;return e=new _e({props:{href:G+n[13].id,$$slots:{default:[ye]},$$scope:{ctx:n}}}),{c(){d(e.$$.fragment)},l(t){g(e.$$.fragment,t)},m(t,o){b(e,t,o),a=!0},p(t,o){const s={};o&8192&&(s.href=G+t[13].id),o&49152&&(s.$$scope={dirty:o,ctx:t}),e.$set(s)},i(t){a||(m(e.$$.fragment,t),a=!0)},o(t){p(e.$$.fragment,t),a=!1},d(t){w(e,t)}}}function ye(n){let e=n[14].value+"",a;return{c(){a=C(e)},l(t){a=I(t,e)},m(t,o){i(t,a,o)},p(t,o){o&16384&&e!==(e=t[14].value+"")&&K(a,e)},d(t){t&&c(a)}}}function De(n){let e,a,t,o;const s=[Be,je],r=[];function u(l,h){return l[14].key===l[5][Me].key?0:1}return e=u(n),a=r[e]=s[e](n),{c(){a.c(),t=A()},l(l){a.l(l),t=A()},m(l,h){r[e].m(l,h),i(l,t,h),o=!0},p(l,h){let v=e;e=u(l),e===v?r[e].p(l,h):(fe(),p(r[v],1,1,()=>{r[v]=null}),ue(),a=r[e],a?a.p(l,h):(a=r[e]=s[e](l),a.c()),m(a,1),a.m(t.parentNode,t))},i(l){o||(m(a),o=!0)},o(l){p(a),o=!1},d(l){r[e].d(l),l&&c(t)}}}function He(n){let e,a,t,o,s,r,u,l;document.title=e="Lighthouse - "+y,t=new W({props:{class:"tile",$$slots:{default:[ke]},$$scope:{ctx:n}}});function h(f){n[9](f)}let v={stickyHeader:!0,sortable:!0,batchSelection:!0,headers:n[5],rows:n[3],$$slots:{cell:[De,({row:f,cell:$})=>({13:f,14:$}),({row:f,cell:$})=>(f?8192:0)|($?16384:0)],default:[Ne]},$$scope:{ctx:n}};return n[0]!==void 0&&(v.selectedRowIds=n[0]),r=new X({props:v}),Y.push(()=>Z(r,"selectedRowIds",h)),{c(){a=L(),d(t.$$.fragment),o=L(),s=x("div"),d(r.$$.fragment),this.h()},l(f){ee('[data-svelte="svelte-1tv8jwr"]',document.head).forEach(c),a=R(f),g(t.$$.fragment,f),o=R(f),s=te(f,"DIV",{class:!0});var T=se(s);g(r.$$.fragment,T),T.forEach(c),this.h()},h(){ae(s,"class","users-table")},m(f,$){i(f,a,$),b(t,f,$),i(f,o,$),i(f,s,$),b(r,s,null),l=!0},p(f,[$]){(!l||$&0)&&e!==(e="Lighthouse - "+y)&&(document.title=e);const T={};$&32768&&(T.$$scope={dirty:$,ctx:f}),t.$set(T);const S={};$&8&&(S.rows=f[3]),$&57374&&(S.$$scope={dirty:$,ctx:f}),!u&&$&1&&(u=!0,S.selectedRowIds=f[0],re(()=>u=!1)),r.$set(S)},i(f){l||(m(t.$$.fragment,f),m(r.$$.fragment,f),l=!0)},o(f){p(t.$$.fragment,f),p(r.$$.fragment,f),l=!1},d(f){f&&c(a),w(t,f),f&&c(o),f&&c(s),w(r)}}}const y="Users";let Me=1,G="/users/";function Ae(n,e,a){let t,o;M(n,N,_=>a(10,t=_)),M(n,ge,_=>a(11,o=_));let s,r="",u=[],l=[],h=[];const v=[{key:"username",value:"Email"},{key:"fullname",value:"Name"},{key:"matriculation_no",value:"Matr. No"},{key:"email_confirmed",value:"Confirmed"},{key:"rolename",value:"Role"},{key:"statusname",value:"Status"}];ne(async()=>{j(N,t=!0,t),await f(),j(N,t=!1,t)});async function f(){j(N,t=!0,t);try{const k=await(await fetch("/users",{method:"POST",body:JSON.stringify({user_id:o.user.id}),headers:{"Content-Type":"application/json",accept:"application/json"}})).json();k.rows.length>0?(a(3,u=k.rows),a(1,l=u.slice())):notifications.showNotification(!0,"error",k.message)}catch(_){notifications.showNotification(!0,"error","comp other err: "+_.message)}j(N,t=!1,t)}function $(_){a(2,r=_.target.value),r.length<1?a(3,u=l):a(3,u=l.filter(function(k){var E,D,H;return((E=k.username)==null?void 0:E.toLowerCase().includes(r.toLowerCase()))||((D=k.fullname)==null?void 0:D.toLowerCase().includes(r.toLowerCase()))||((H=k.matriculation_no)==null?void 0:H.toString().toLowerCase().includes(r.toLowerCase()))}))}function T(_){a(2,r=""),a(3,u=l)}function S(_,k){if(_.length>0){let E=Object.keys(l[0]);de(_,E,E,`${y}_${k}.csv`)}}function P(_){s=_,a(0,s)}return n.$$.update=()=>{n.$$.dirty&3&&a(4,h=l.filter(function(_){return s.indexOf(_.id)>-1}))},[s,l,r,u,h,v,$,T,S,P]}class Ge extends V{constructor(e){super();z(this,e,Ae,He,Q,{})}}export{Ge as default};
