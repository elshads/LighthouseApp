import{S as H,i as J,s as K,ay as O,F as D,G as N,k as S,w as $,ai as P,d as m,m as T,x as p,g as _,y as g,I as q,q as b,o as w,B as h,J as B,v as A,K as y,az as E,aA as I,t as z,h as G,as as F}from"../../chunks/vendor-cf8775f0.js";import{s as M}from"../../chunks/stores-847348a8.js";import{l as d,n as L}from"../../chunks/appStore-28a71663.js";import{D as Q}from"../../chunks/DataGrid-4595a724.js";import"../../chunks/csvGenerator-27de1fc1.js";import"../../chunks/global-a1cc3230.js";/* empty css                                                          */function U(r){let s;return{c(){s=z("Home")},l(a){s=G(a,"Home")},m(a,e){_(a,s,e)},d(a){a&&m(s)}}}function V(r){let s;return{c(){s=z(k)},l(a){s=G(a,k)},m(a,e){_(a,s,e)},p:F,d(a){a&&m(s)}}}function W(r){let s,a,e,o;return s=new I({props:{href:"/",$$slots:{default:[U]},$$scope:{ctx:r}}}),e=new I({props:{href:"/content",isCurrentPage:!0,$$slots:{default:[V]},$$scope:{ctx:r}}}),{c(){$(s.$$.fragment),a=S(),$(e.$$.fragment)},l(t){p(s.$$.fragment,t),a=T(t),p(e.$$.fragment,t)},m(t,i){g(s,t,i),_(t,a,i),g(e,t,i),o=!0},p(t,i){const f={};i&256&&(f.$$scope={dirty:i,ctx:t}),s.$set(f);const u={};i&256&&(u.$$scope={dirty:i,ctx:t}),e.$set(u)},i(t){o||(b(s.$$.fragment,t),b(e.$$.fragment,t),o=!0)},o(t){w(s.$$.fragment,t),w(e.$$.fragment,t),o=!1},d(t){h(s,t),t&&m(a),h(e,t)}}}function X(r){let s,a;return s=new E({props:{noTrailingSlash:!0,$$slots:{default:[W]},$$scope:{ctx:r}}}),{c(){$(s.$$.fragment)},l(e){p(s.$$.fragment,e)},m(e,o){g(s,e,o),a=!0},p(e,o){const t={};o&256&&(t.$$scope={dirty:o,ctx:e}),s.$set(t)},i(e){a||(b(s.$$.fragment,e),a=!0)},o(e){w(s.$$.fragment,e),a=!1},d(e){h(s,e)}}}function Y(r){let s,a,e,o,t,i,f,u;document.title=s="Lighthouse - "+k,e=new O({props:{class:"tile",$$slots:{default:[X]},$$scope:{ctx:r}}});function v(n){r[3](n)}function C(n){r[4](n)}let l={headers:r[2],searchKeys:["title","created_by_name","sessiontype_name"],size:"tall",tableClass:"contentlist-table",linkColumn:"2",link:"/content/"};return r[1]!==void 0&&(l.rows=r[1]),r[0]!==void 0&&(l.selectedRows=r[0]),t=new Q({props:l}),D.push(()=>N(t,"rows",v)),D.push(()=>N(t,"selectedRows",C)),{c(){a=S(),$(e.$$.fragment),o=S(),$(t.$$.fragment)},l(n){P('[data-svelte="svelte-1tv8jwr"]',document.head).forEach(m),a=T(n),p(e.$$.fragment,n),o=T(n),p(t.$$.fragment,n)},m(n,c){_(n,a,c),g(e,n,c),_(n,o,c),g(t,n,c),u=!0},p(n,[c]){(!u||c&0)&&s!==(s="Lighthouse - "+k)&&(document.title=s);const j={};c&256&&(j.$$scope={dirty:c,ctx:n}),e.$set(j);const R={};!i&&c&2&&(i=!0,R.rows=n[1],q(()=>i=!1)),!f&&c&1&&(f=!0,R.selectedRows=n[0],q(()=>f=!1)),t.$set(R)},i(n){u||(b(e.$$.fragment,n),b(t.$$.fragment,n),u=!0)},o(n){w(e.$$.fragment,n),w(t.$$.fragment,n),u=!1},d(n){n&&m(a),h(e,n),n&&m(o),h(t,n)}}}const k="Content List";function Z(r,s,a){let e,o;B(r,d,l=>a(5,e=l)),B(r,M,l=>a(6,o=l));let t,i;const f=[{key:"id",value:"Id"},{key:"title",value:"Title"},{key:"created_by_name",value:"Creator"},{key:"sessiontype_name",value:"Type"},{key:"sessionstatus_name",value:"Status"},{key:"session_start",value:"Start Date"}];A(async()=>{y(d,e=!0,e),await u(),y(d,e=!1,e)});async function u(){y(d,e=!0,e);try{const n=await(await fetch("/content",{method:"POST",body:JSON.stringify({user_id:o.user.id}),headers:{"Content-Type":"application/json",accept:"application/json"}})).json();n.rows.length>0?a(1,i=n.rows):L.showNotification(!0,"error",n.message)}catch(l){L.showNotification(!0,"error","comp other err: "+l.message)}y(d,e=!1,e)}function v(l){i=l,a(1,i)}function C(l){t=l,a(0,t)}return[t,i,f,v,C]}class oe extends H{constructor(s){super();J(this,s,Z,Y,K,{})}}export{oe as default};
