import{S as Ve,i as qe,s as Ne,ba as oe,F as te,G as ne,aI as Ce,av as be,k as R,e as g,w as P,t as ie,ai as Le,d as u,m as V,c as v,a as h,x as j,h as se,M as Pe,b as w,g as re,N as o,y as S,I as ae,q as U,o as x,B as F,v as je}from"../../../chunks/vendor-cf8775f0.js";import{c as ye}from"../../../chunks/config-352e7003.js";import{n as le}from"../../../chunks/appStore-28a71663.js";import{g as Se}from"../../../chunks/navigation-0e6511d1.js";import"../../../chunks/singletons-d1fb5791.js";function Ue(t){let i;return{c(){i=ie("Register")},l(n){i=se(n,"Register")},m(n,a){re(n,i,a)},d(n){n&&u(i)}}}function xe(t){let i;return{c(){i=ie("Log in")},l(n){i=se(n,"Log in")},m(n,a){re(n,i,a)},d(n){n&&u(i)}}}function Fe(t){let i;return{c(){i=ie("Resend confirmation link")},l(n){i=se(n,"Resend confirmation link")},m(n,a){re(n,i,a)},d(n){n&&u(i)}}}function Me(t){let i,n,a,m,d,q,N,_,f,C,k,M,E,p,K,Q,I,c,l,L,A,$,ue,fe,B,b,de,y,pe,G,T,ce,O,me,D,W;document.title=i="Lighthouse - "+ke;function Ee(e){t[11](e)}function Ie(e){t[12](e)}let ge={type:"text",invalid:t[5],invalidText:"Required",labelText:"Full name",placeholder:"Enter your name..."};t[1]!==void 0&&(ge.value=t[1]),t[8]!==void 0&&(ge.ref=t[8]),f=new oe({props:ge}),te.push(()=>ne(f,"value",Ee)),te.push(()=>ne(f,"ref",Ie)),f.$on("keyup",t[10]);function Te(e){t[13](e)}let _e={type:"email",invalid:t[4],invalidText:"Required: username@fh-swf.de",labelText:"Username",placeholder:"Enter username..."};t[0]!==void 0&&(_e.value=t[0]),p=new oe({props:_e}),te.push(()=>ne(p,"value",Te)),p.$on("keyup",t[10]);function De(e){t[14](e)}let $e={type:"password",invalid:t[6],invalidText:"Required: min length 6 characters",labelText:"Password",placeholder:"Enter password..."};t[2]!==void 0&&($e.value=t[2]),c=new oe({props:$e}),te.push(()=>ne(c,"value",De)),c.$on("keyup",t[10]);function Re(e){t[15](e)}let he={type:"password",invalid:t[7],invalidText:"password does not match",labelText:"Password Confirmation",placeholder:"Confirm password..."};return t[3]!==void 0&&(he.value=t[3]),$=new oe({props:he}),te.push(()=>ne($,"value",Re)),$.$on("keyup",t[10]),b=new Ce({props:{$$slots:{default:[Ue]},$$scope:{ctx:t}}}),b.$on("click",t[9]),T=new be({props:{href:"/auth/login",$$slots:{default:[xe]},$$scope:{ctx:t}}}),D=new be({props:{href:"/auth/confirmation",$$slots:{default:[Fe]},$$scope:{ctx:t}}}),{c(){n=R(),a=g("div"),m=g("div"),d=g("img"),N=R(),_=g("div"),P(f.$$.fragment),M=R(),E=g("div"),P(p.$$.fragment),Q=R(),I=g("div"),P(c.$$.fragment),L=R(),A=g("div"),P($.$$.fragment),fe=R(),B=g("div"),P(b.$$.fragment),de=R(),y=g("div"),pe=ie(`Already registered?\r
		`),G=g("div"),P(T.$$.fragment),ce=R(),O=g("div"),me=ie("or "),P(D.$$.fragment),this.h()},l(e){Le('[data-svelte="svelte-1tv8jwr"]',document.head).forEach(u),n=V(e),a=v(e,"DIV",{});var r=h(a);m=v(r,"DIV",{});var J=h(m);d=v(J,"IMG",{src:!0,alt:!0,height:!0}),J.forEach(u),N=V(r),_=v(r,"DIV",{class:!0});var z=h(_);j(f.$$.fragment,z),z.forEach(u),M=V(r),E=v(r,"DIV",{class:!0});var H=h(E);j(p.$$.fragment,H),H.forEach(u),Q=V(r),I=v(r,"DIV",{class:!0});var X=h(I);j(c.$$.fragment,X),X.forEach(u),L=V(r),A=v(r,"DIV",{class:!0});var Y=h(A);j($.$$.fragment,Y),Y.forEach(u),fe=V(r),B=v(r,"DIV",{class:!0});var Z=h(B);j(b.$$.fragment,Z),Z.forEach(u),de=V(r),y=v(r,"DIV",{class:!0});var ee=h(y);pe=se(ee,`Already registered?\r
		`),G=v(ee,"DIV",{class:!0});var we=h(G);j(T.$$.fragment,we),we.forEach(u),ce=V(ee),O=v(ee,"DIV",{});var ve=h(O);me=se(ve,"or "),j(D.$$.fragment,ve),ve.forEach(u),ee.forEach(u),r.forEach(u),this.h()},h(){Pe(d.src,q="/img/logo_orig.png")||w(d,"src",q),w(d,"alt","logo"),w(d,"height","64"),w(_,"class","py-2"),w(E,"class","py-2"),w(I,"class","py-2"),w(A,"class","py-2"),w(B,"class","py-4"),w(G,"class","py-2"),w(y,"class","py-2")},m(e,s){re(e,n,s),re(e,a,s),o(a,m),o(m,d),o(a,N),o(a,_),S(f,_,null),o(a,M),o(a,E),S(p,E,null),o(a,Q),o(a,I),S(c,I,null),o(a,L),o(a,A),S($,A,null),o(a,fe),o(a,B),S(b,B,null),o(a,de),o(a,y),o(y,pe),o(y,G),S(T,G,null),o(y,ce),o(y,O),o(O,me),S(D,O,null),W=!0},p(e,[s]){(!W||s&0)&&i!==(i="Lighthouse - "+ke)&&(document.title=i);const r={};s&32&&(r.invalid=e[5]),!C&&s&2&&(C=!0,r.value=e[1],ae(()=>C=!1)),!k&&s&256&&(k=!0,r.ref=e[8],ae(()=>k=!1)),f.$set(r);const J={};s&16&&(J.invalid=e[4]),!K&&s&1&&(K=!0,J.value=e[0],ae(()=>K=!1)),p.$set(J);const z={};s&64&&(z.invalid=e[6]),!l&&s&4&&(l=!0,z.value=e[2],ae(()=>l=!1)),c.$set(z);const H={};s&128&&(H.invalid=e[7]),!ue&&s&8&&(ue=!0,H.value=e[3],ae(()=>ue=!1)),$.$set(H);const X={};s&65536&&(X.$$scope={dirty:s,ctx:e}),b.$set(X);const Y={};s&65536&&(Y.$$scope={dirty:s,ctx:e}),T.$set(Y);const Z={};s&65536&&(Z.$$scope={dirty:s,ctx:e}),D.$set(Z)},i(e){W||(U(f.$$.fragment,e),U(p.$$.fragment,e),U(c.$$.fragment,e),U($.$$.fragment,e),U(b.$$.fragment,e),U(T.$$.fragment,e),U(D.$$.fragment,e),W=!0)},o(e){x(f.$$.fragment,e),x(p.$$.fragment,e),x(c.$$.fragment,e),x($.$$.fragment,e),x(b.$$.fragment,e),x(T.$$.fragment,e),x(D.$$.fragment,e),W=!1},d(e){e&&u(n),e&&u(a),F(f),F(p),F(c),F($),F(b),F(T),F(D)}}}const ke="Register";function Ae(t,i,n){let a="",m="",d="",q="",N=!1,_=!1,f=!1,C=!1,k;je(()=>{k.focus()});async function M(){if(!N&&!_&&!f&&!C)try{const L=await(await fetch("/auth/register",{method:"POST",body:JSON.stringify({username:a,fullname:m,password:d}),headers:{"Content-Type":"application/json",accept:"application/json"}})).json();L.id>0?(le.showNotification(!0,"success",L.message),Se("/auth/login")):le.showNotification(!0,"error",L.message)}catch(l){le.showNotification(!0,"error","comp other err: "+l.message)}else le.showNotification(!0,"error","Correct your entries and try again")}async function E(l){l.key==="Enter"&&await M()}function p(l){m=l,n(1,m)}function K(l){k=l,n(8,k)}function Q(l){a=l,n(0,a)}function I(l){d=l,n(2,d)}function c(l){q=l,n(3,q)}return t.$$.update=()=>{t.$$.dirty&1&&n(4,N=!(a.length>0&&(a.includes("@"+ye.accepteddomain)||ye.accepteddomain==="*"))),t.$$.dirty&2&&n(5,_=m.length<1),t.$$.dirty&4&&n(6,f=d.length<6),t.$$.dirty&12&&n(7,C=d!=q)},[a,m,d,q,N,_,f,C,k,M,E,p,K,Q,I,c]}class He extends Ve{constructor(i){super();qe(this,i,Ae,Me,Ne,{})}}export{He as default};
