import{S as ce,i as de,s as pe,ba as ie,F as ee,G as te,aI as me,av as oe,k as L,e as h,w as U,t as z,ai as $e,d as f,m as N,c as v,a as k,x as F,h as A,M as ge,b as w,g as O,N as u,y as M,I as ne,q as B,o as C,B as G,v as _e}from"../../../chunks/vendor-cf8775f0.js";import{n as J}from"../../../chunks/appStore-28a71663.js";import{g as he}from"../../../chunks/navigation-0e6511d1.js";import"../../../chunks/singletons-d1fb5791.js";function ve(s){let a;return{c(){a=z("Log in")},l(n){a=A(n,"Log in")},m(n,t){O(n,a,t)},d(n){n&&f(a)}}}function we(s){let a;return{c(){a=z("Register")},l(n){a=A(n,"Register")},m(n,t){O(n,a,t)},d(n){n&&f(a)}}}function be(s){let a;return{c(){a=z("Forgot password?")},l(n){a=A(n,"Forgot password?")},m(n,t){O(n,a,t)},d(n){n&&f(a)}}}function ye(s){let a,n,t,d,c,T,V,$,l,q,o,b,E,p,H,K,I,m,Q,y,W,g,X,D,_,x;document.title=a="Lighthouse - "+re;function le(e){s[5](e)}function ue(e){s[6](e)}let Y={type:"email",invalid:ke,invalidText:"Required: username@fh-swf.de",labelText:"Username",placeholder:"Enter username..."};s[0]!==void 0&&(Y.value=s[0]),s[2]!==void 0&&(Y.ref=s[2]),l=new ie({props:Y}),ee.push(()=>te(l,"value",le)),ee.push(()=>te(l,"ref",ue)),l.$on("keyup",s[4]);function fe(e){s[7](e)}let ae={type:"password",invalid:Ee,invalidText:"Required: min length 6 characters",labelText:"Password",placeholder:"Enter password..."};return s[1]!==void 0&&(ae.value=s[1]),p=new ie({props:ae}),ee.push(()=>te(p,"value",fe)),p.$on("keyup",s[4]),m=new me({props:{$$slots:{default:[ve]},$$scope:{ctx:s}}}),m.$on("click",s[3]),g=new oe({props:{href:"/auth/register",$$slots:{default:[we]},$$scope:{ctx:s}}}),_=new oe({props:{href:"/auth/restore",$$slots:{default:[be]},$$scope:{ctx:s}}}),{c(){n=L(),t=h("div"),d=h("div"),c=h("img"),V=L(),$=h("div"),U(l.$$.fragment),b=L(),E=h("div"),U(p.$$.fragment),K=L(),I=h("div"),U(m.$$.fragment),Q=L(),y=h("div"),W=z("or "),U(g.$$.fragment),X=L(),D=h("div"),U(_.$$.fragment),this.h()},l(e){$e('[data-svelte="svelte-1tv8jwr"]',document.head).forEach(f),n=N(e),t=v(e,"DIV",{});var i=k(t);d=v(i,"DIV",{});var R=k(d);c=v(R,"IMG",{src:!0,alt:!0,height:!0}),R.forEach(f),V=N(i),$=v(i,"DIV",{class:!0});var j=k($);F(l.$$.fragment,j),j.forEach(f),b=N(i),E=v(i,"DIV",{class:!0});var P=k(E);F(p.$$.fragment,P),P.forEach(f),K=N(i),I=v(i,"DIV",{class:!0});var S=k(I);F(m.$$.fragment,S),S.forEach(f),Q=N(i),y=v(i,"DIV",{class:!0});var Z=k(y);W=A(Z,"or "),F(g.$$.fragment,Z),Z.forEach(f),X=N(i),D=v(i,"DIV",{class:!0});var se=k(D);F(_.$$.fragment,se),se.forEach(f),i.forEach(f),this.h()},h(){ge(c.src,T="/img/logo_orig.png")||w(c,"src",T),w(c,"alt","logo"),w(c,"height","96"),w($,"class","py-2"),w(E,"class","py-2"),w(I,"class","py-4"),w(y,"class","py-2"),w(D,"class","py-2")},m(e,r){O(e,n,r),O(e,t,r),u(t,d),u(d,c),u(t,V),u(t,$),M(l,$,null),u(t,b),u(t,E),M(p,E,null),u(t,K),u(t,I),M(m,I,null),u(t,Q),u(t,y),u(y,W),M(g,y,null),u(t,X),u(t,D),M(_,D,null),x=!0},p(e,[r]){(!x||r&0)&&a!==(a="Lighthouse - "+re)&&(document.title=a);const i={};!q&&r&1&&(q=!0,i.value=e[0],ne(()=>q=!1)),!o&&r&4&&(o=!0,i.ref=e[2],ne(()=>o=!1)),l.$set(i);const R={};!H&&r&2&&(H=!0,R.value=e[1],ne(()=>H=!1)),p.$set(R);const j={};r&256&&(j.$$scope={dirty:r,ctx:e}),m.$set(j);const P={};r&256&&(P.$$scope={dirty:r,ctx:e}),g.$set(P);const S={};r&256&&(S.$$scope={dirty:r,ctx:e}),_.$set(S)},i(e){x||(B(l.$$.fragment,e),B(p.$$.fragment,e),B(m.$$.fragment,e),B(g.$$.fragment,e),B(_.$$.fragment,e),x=!0)},o(e){C(l.$$.fragment,e),C(p.$$.fragment,e),C(m.$$.fragment,e),C(g.$$.fragment,e),C(_.$$.fragment,e),x=!1},d(e){e&&f(n),e&&f(t),G(l),G(p),G(m),G(g),G(_)}}}const re="Login";let ke=!1,Ee=!1;function Ie(s,a,n){let t="",d="",c;_e(async()=>{c.focus()});async function T(){try{const b=await(await fetch("/auth/login",{method:"POST",body:JSON.stringify({username:t,password:d}),headers:{"Content-Type":"application/json",accept:"application/json"}})).json();b.id>0?location.reload():b.id===-2?J.showNotification(!0,"error","Email is not confirmed. Please confirm your email","Resend email",()=>{he("/auth/confirmation"),J.showNotification(!1)}):J.showNotification(!0,"error",b.message)}catch(o){J.showNotification(!0,"error","comp other err: "+o.message)}}async function V(o){o.key==="Enter"&&await T()}function $(o){t=o,n(0,t)}function l(o){c=o,n(2,c)}function q(o){d=o,n(1,d)}return[t,d,c,T,V,$,l,q]}class Ve extends ce{constructor(a){super();de(this,a,Ie,ye,pe,{})}}export{Ve as default};
