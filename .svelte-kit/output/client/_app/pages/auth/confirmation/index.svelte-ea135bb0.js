import{S as F,i as J,s as x,av as G,k as j,e as b,w as q,t as N,ai as z,d as _,m as L,c as k,a as y,x as T,h as C,b as w,g,N as I,y as R,o as D,p as H,q as V,B,v as K,n as Q,ba as W,F as O,G as P,aI as X,M as Y,I as U,bb as Z,f as ee,j as te}from"../../../chunks/vendor-cf8775f0.js";import{n as M}from"../../../chunks/appStore-28a71663.js";function ne(f){let n,t,o,i,r,u,d,p,m,s,a,h;function v(e){f[6](e)}function S(e){f[7](e)}let l={type:"email",invalid:f[2],invalidText:"Required",labelText:"Email",placeholder:"Enter email address..."};return f[0]!==void 0&&(l.value=f[0]),f[3]!==void 0&&(l.ref=f[3]),u=new W({props:l}),O.push(()=>P(u,"value",v)),O.push(()=>P(u,"ref",S)),u.$on("keyup",f[5]),a=new X({props:{$$slots:{default:[ae]},$$scope:{ctx:f}}}),a.$on("click",f[4]),{c(){n=b("div"),t=b("img"),i=j(),r=b("div"),q(u.$$.fragment),m=j(),s=b("div"),q(a.$$.fragment),this.h()},l(e){n=k(e,"DIV",{});var c=y(n);t=k(c,"IMG",{src:!0,alt:!0,height:!0}),c.forEach(_),i=L(e),r=k(e,"DIV",{class:!0});var $=y(r);T(u.$$.fragment,$),$.forEach(_),m=L(e),s=k(e,"DIV",{class:!0});var E=y(s);T(a.$$.fragment,E),E.forEach(_),this.h()},h(){Y(t.src,o="/img/logo_orig.png")||w(t,"src",o),w(t,"alt","logo"),w(t,"height","96"),w(r,"class","py-2"),w(s,"class","py-4")},m(e,c){g(e,n,c),I(n,t),g(e,i,c),g(e,r,c),R(u,r,null),g(e,m,c),g(e,s,c),R(a,s,null),h=!0},p(e,c){const $={};c&4&&($.invalid=e[2]),!d&&c&1&&(d=!0,$.value=e[0],U(()=>d=!1)),!p&&c&8&&(p=!0,$.ref=e[3],U(()=>p=!1)),u.$set($);const E={};c&256&&(E.$$scope={dirty:c,ctx:e}),a.$set(E)},i(e){h||(V(u.$$.fragment,e),V(a.$$.fragment,e),h=!0)},o(e){D(u.$$.fragment,e),D(a.$$.fragment,e),h=!1},d(e){e&&_(n),e&&_(i),e&&_(r),B(u),e&&_(m),e&&_(s),B(a)}}}function se(f){let n,t,o,i,r,u,d,p,m;return t=new Z({props:{class:"success-badge"}}),{c(){n=b("div"),q(t.$$.fragment),o=j(),i=b("div"),r=b("div"),u=N("Confirmation link sent on email address: "),d=b("span"),p=N(f[0]),this.h()},l(s){n=k(s,"DIV",{class:!0});var a=y(n);T(t.$$.fragment,a),a.forEach(_),o=L(s),i=k(s,"DIV",{class:!0});var h=y(i);r=k(h,"DIV",{});var v=y(r);u=C(v,"Confirmation link sent on email address: "),d=k(v,"SPAN",{style:!0});var S=y(d);p=C(S,f[0]),S.forEach(_),v.forEach(_),h.forEach(_),this.h()},h(){w(n,"class","py-2"),ee(d,"color","#0f62fe"),w(i,"class","py-8")},m(s,a){g(s,n,a),R(t,n,null),g(s,o,a),g(s,i,a),I(i,r),I(r,u),I(r,d),I(d,p),m=!0},p(s,a){(!m||a&1)&&te(p,s[0])},i(s){m||(V(t.$$.fragment,s),m=!0)},o(s){D(t.$$.fragment,s),m=!1},d(s){s&&_(n),B(t),s&&_(o),s&&_(i)}}}function ae(f){let n;return{c(){n=N("Send confirmation link")},l(t){n=C(t,"Send confirmation link")},m(t,o){g(t,n,o)},d(t){t&&_(n)}}}function ie(f){let n;return{c(){n=N("Login")},l(t){n=C(t,"Login")},m(t,o){g(t,n,o)},d(t){t&&_(n)}}}function re(f){let n;return{c(){n=N("Register")},l(t){n=C(t,"Register")},m(t,o){g(t,n,o)},d(t){t&&_(n)}}}function le(f){let n,t,o,i,r,u,d,p,m,s,a;document.title=n="Lighthouse - "+A;const h=[se,ne],v=[];function S(l,e){return l[1]?0:1}return i=S(f),r=v[i]=h[i](f),p=new G({props:{href:"/auth/login",$$slots:{default:[ie]},$$scope:{ctx:f}}}),s=new G({props:{href:"/auth/register",$$slots:{default:[re]},$$scope:{ctx:f}}}),{c(){t=j(),o=b("div"),r.c(),u=j(),d=b("div"),q(p.$$.fragment),m=N(" or "),q(s.$$.fragment),this.h()},l(l){z('[data-svelte="svelte-1tv8jwr"]',document.head).forEach(_),t=L(l),o=k(l,"DIV",{});var c=y(o);r.l(c),u=L(c),d=k(c,"DIV",{class:!0});var $=y(d);T(p.$$.fragment,$),m=C($," or "),T(s.$$.fragment,$),$.forEach(_),c.forEach(_),this.h()},h(){w(d,"class","py-2")},m(l,e){g(l,t,e),g(l,o,e),v[i].m(o,null),I(o,u),I(o,d),R(p,d,null),I(d,m),R(s,d,null),a=!0},p(l,[e]){(!a||e&0)&&n!==(n="Lighthouse - "+A)&&(document.title=n);let c=i;i=S(l),i===c?v[i].p(l,e):(Q(),D(v[c],1,1,()=>{v[c]=null}),H(),r=v[i],r?r.p(l,e):(r=v[i]=h[i](l),r.c()),V(r,1),r.m(o,u));const $={};e&256&&($.$$scope={dirty:e,ctx:l}),p.$set($);const E={};e&256&&(E.$$scope={dirty:e,ctx:l}),s.$set(E)},i(l){a||(V(r),V(p.$$.fragment,l),V(s.$$.fragment,l),a=!0)},o(l){D(r),D(p.$$.fragment,l),D(s.$$.fragment,l),a=!1},d(l){l&&_(t),l&&_(o),v[i].d(),B(p),B(s)}}}const A="Send email confirmation";function oe(f,n,t){let o=!1,i="",r=!0,u;K(async()=>{u.focus()});async function d(){if(r)M.showNotification(!0,"error","Correct your entries and try again");else try{const h=await(await fetch("/auth/confirmation",{method:"POST",body:JSON.stringify({username:i}),headers:{"Content-Type":"application/json",accept:"application/json"}})).json();h.id>0?t(1,o=!0):M.showNotification(!0,"error",h.message)}catch(a){M.showNotification(!0,"error","comp other err: "+a.message)}}async function p(a){a.key==="Enter"&&await d()}function m(a){i=a,t(0,i)}function s(a){u=a,t(3,u)}return f.$$.update=()=>{f.$$.dirty&1&&t(2,r=!(i.length>0&&i.includes("@")))},[i,o,r,u,d,p,m,s]}class ce extends F{constructor(n){super();J(this,n,oe,le,x,{})}}export{ce as default};
